{% extends "base.html" %}

{% block title %}Eventos - CPI{% endblock %}

{% block content %}
<section class="page-hero page-hero--events">
    <div class="public-container reveal">
        <span class="eyebrow">Agenda CPI</span>
        <h1>Encontros para transformar relacionamentos</h1>
        <p>Participe de eventos presenciais e online voltados para casais que desejam fortalecer sua aliança.</p>
    </div>
</section>

<section id="eventos" class="section">
    <div class="public-container">
        <div class="cards cards--events">
            {% for evento in eventos %}
            <article class="event-card reveal">
                <div class="event-card__date">
                    <span>{{ evento.event_date.strftime('%d') }}</span>
                    <small>{{ evento.event_date.strftime('%b').upper() }}</small>
                </div>
                <div class="event-card__content">
                    <h2>{{ evento.title }}</h2>
                    <p class="event-card__meta">
                        <i class="fa-regular fa-clock"></i> {{ evento.event_date.strftime('%d/%m/%Y às %H:%M') }}
                        <span>•</span>
                        <i class="fa-solid fa-location-dot"></i> {{ evento.location }}
                    </p>
                    <p>{{ evento.description }}</p>
                    {% if evento.registration_link %}
                    <a href="{{ evento.registration_link }}" target="_blank" rel="noopener noreferrer nofollow" class="btn btn--primary">
                        Garantir minha vaga <i class="fa-solid fa-arrow-up-right-from-square"></i>
                    </a>
                    {% endif %}
                </div>
            </article>
            {% else %}
            <div class="empty-block reveal">
                <i class="fa-regular fa-calendar-check"></i>
                <h3>Sem eventos ativos no momento</h3>
                <p>Siga nossas redes e acompanhe novidades para não perder as próximas turmas e encontros.</p>
                <a href="https://www.instagram.com/cpi_casamentoplanoinfalivel" target="_blank" rel="noopener noreferrer" class="btn btn--primary">Acompanhar no Instagram</a>
            </div>
            {% endfor %}
        </div>

        {% if pagination and pagination.pages > 1 %}
        <nav class="pagination-nav" aria-label="Paginação de eventos públicos">
            {% if pagination.has_prev %}
            <a href="{{ url_for('main.eventos_public', page=pagination.prev_num) }}" class="btn btn--ghost">Anterior</a>
            {% endif %}
            <span>Página {{ pagination.page }} de {{ pagination.pages }}</span>
            {% if pagination.has_next %}
            <a href="{{ url_for('main.eventos_public', page=pagination.next_num) }}" class="btn btn--ghost">Próxima</a>
            {% endif %}
        </nav>
        {% endif %}
    </div>
</section>
{% endblock %}